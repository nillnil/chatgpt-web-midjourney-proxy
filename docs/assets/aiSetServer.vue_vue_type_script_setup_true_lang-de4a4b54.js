import{d as N,ar as Y,r as w,l as U,a2 as I,a4 as k,$ as J,o as b,c as $,a as e,a5 as c,a6 as a,b as d,R as s,ba as M,ab as p,av as y,N as m,X as O,aj as L,ac as j,at as q,O as S,m as z,a3 as A,a$ as r,be as h}from"./index-2c2818f8.js";import{a as f,N as C}from"./Switch-ece9035a.js";const G={class:"mb-4 flex justify-between items-center"},W=e("span",{class:"text-red-500"},"*",-1),F={class:"mb-4 flex justify-between items-center"},X={class:"flex justify-between items-center"},H={class:"flex justify-end items-center w-[80%] max-w-[240px]"},Q={class:"w-[200px]"},Z={class:"w-[40px] text-right"},ee={class:"mb-4 text-[12px] text-gray-300 dark:text-gray-300/20"},te={class:"flex justify-between items-center"},se={class:"flex justify-end items-center w-[80%] max-w-[240px]"},ae={class:"w-[200px]"},le={class:"w-[40px] text-right"},oe={class:"mb-4 text-[12px] text-gray-300 dark:text-gray-300/20"},ne={class:"mb-4"},ie={class:"flex justify-between items-center"},re={class:"flex justify-end items-center w-[80%] max-w-[240px]"},ue={class:"w-[200px]"},de={class:"w-[40px] text-right"},pe={class:"mb-4 text-[12px] text-gray-300 dark:text-gray-300/20"},ce={class:"flex justify-between items-center"},me={class:"flex justify-end items-center w-[80%] max-w-[240px]"},ve={class:"w-[200px]"},_e={class:"w-[40px] text-right"},ye={class:"mb-4 text-[12px] text-gray-300 dark:text-gray-300/20"},fe={class:"flex justify-between items-center"},xe={class:"flex justify-end items-center w-[80%] max-w-[240px]"},he={class:"w-[200px]"},be={class:"w-[40px] text-right"},$e={class:"mb-4 text-[12px] text-gray-300 dark:text-gray-300/20"},je={class:"flex justify-between items-center"},ge={class:"flex justify-end items-center w-[80%] max-w-[240px]"},we={class:"w-[200px]"},Se={class:"w-[40px] text-right"},ke={class:"mb-4 text-[12px] text-gray-300 dark:text-gray-300/20"},De={class:"mb-4 flex justify-between items-center"},Ee={class:"text-right flex justify-end space-x-2"},et=N({__name:"aiModel",emits:["close"],setup(P,{emit:g}){const x=Y().active,i=new q(x??1002),t=w(i.getGptConfig()),u=w({model:["gpt-4-turbo-2024-04-09","gpt-4-0125-preview","gpt-3.5-turbo","gpt-4-1106-preview","gpt-3.5-turbo-16k","gpt-4","gpt-4-0613","gpt-4-32k-0613","gpt-4-32k","gpt-4-32k-0314","gpt-3.5-turbo-16k-0613","gpt-4-vision-preview","gpt-3.5-turbo-1106","gpt-3.5-turbo-0125","gpt-3.5-turbo-0301","gpt-3.5-turbo-0613","gpt-4-all","gpt-3.5-net","gemini-pro","gemini-pro-1.5","claude-3-sonnet-20240229","claude-3-opus-20240229","claude-3-haiku-20240229","suno-v3"],maxToken:2048}),E=w({openMore:!1}),R=U(()=>{let l=[];for(let o of"alloy,echo,fable,onyx,nova,shimmer".split(/[ ,]+/ig))l.push({label:o,value:o});return l}),B=U(()=>{let l=[];for(let n of u.value.model)l.push({label:n,value:n});if(y.myData.userModel){let n=y.myData.userModel.split(/[ ,]+/ig);for(let _ of n)_&&l.push({label:_,value:_})}if(S.myData.session.cmodels){let n=[],_=[];S.myData.session.cmodels.split(/[ ,]+/ig).map(v=>{v.indexOf("-")==0?n.push(v.substring(1)):_.push(v)}),z("cmodels",n,_),l=l.filter(v=>n.indexOf(v.value)==-1),_.map(v=>l.push({label:v,value:v}))}return Array.from(new Map(l.map(n=>[JSON.stringify(n),n])).values())}),T=I(),K=l=>{i.save(t.value),y.setMyData(t.value),S.setMyData({act:"saveChat"}),l!="hide"&&T.success(A("common.saveSuccess")),g("close")};k(()=>t.value.model,l=>{t.value.gpts=void 0;let o=4096;l.indexOf("vision")>-1?o=4096:(l.indexOf("gpt-4")>-1||l.indexOf("16k")>-1||l.toLowerCase().includes("claude-3"))&&(o=4096*2),u.value.maxToken=o/2,t.value.max_tokens>u.value.maxToken&&(t.value.max_tokens=u.value.maxToken)});const V=()=>{y.setInit(),t.value=y.myData};return J(()=>{}),(l,o)=>(b(),$(O,null,[e("section",G,[e("div",null,[W,c(" "+a(l.$t("mjset.model")),1)]),d(s(M),{value:t.value.model,"onUpdate:value":o[0]||(o[0]=n=>t.value.model=n),options:s(B),size:"small",filterable:"",class:"!w-[50%]"},null,8,["value","options"])]),e("section",F,[d(s(m),{placeholder:l.$t("mjchat.modlePlaceholder"),value:s(y).myData.userModel,"onUpdate:value":o[1]||(o[1]=n=>s(y).myData.userModel=n)},{prefix:p(()=>[c(a(l.$t("mjchat.myModle")),1)]),_:1},8,["placeholder","value"])]),e("section",X,[e("div",null,a(l.$t("mjchat.historyCnt")),1),e("div",H,[e("div",Q,[d(s(f),{value:t.value.talkCount,"onUpdate:value":o[2]||(o[2]=n=>t.value.talkCount=n),step:1,max:50},null,8,["value"])]),e("div",Z,a(t.value.talkCount),1)])]),e("div",ee,a(l.$t("mjchat.historyToken")),1),e("section",te,[e("div",null,a(l.$t("mjchat.historyTCnt")),1),e("div",se,[e("div",ae,[d(s(f),{value:t.value.max_tokens,"onUpdate:value":o[3]||(o[3]=n=>t.value.max_tokens=n),step:1,max:u.value.maxToken,min:1},null,8,["value","max"])]),e("div",le,a(t.value.max_tokens),1)])]),e("div",oe,a(l.$t("mjchat.historyTCntInfo")),1),e("section",ne,[e("div",null,a(l.$t("mjchat.role")),1),e("div",null,[d(s(m),{type:"textarea",placeholder:l.$t("mjchat.rolePlaceholder"),value:t.value.systemMessage,"onUpdate:value":o[4]||(o[4]=n=>t.value.systemMessage=n),autosize:{minRows:3}},null,8,["placeholder","value"])])]),E.value.openMore?(b(),$(O,{key:0},[e("section",ie,[e("div",null,a(l.$t("mj.temperature")),1),e("div",re,[e("div",ue,[d(s(f),{value:t.value.temperature,"onUpdate:value":o[5]||(o[5]=n=>t.value.temperature=n),step:.01,max:1},null,8,["value","step"])]),e("div",de,a(t.value.temperature),1)])]),e("div",pe,a(l.$t("mj.temperatureInfo")),1),e("section",ce,[e("div",null,a(l.$t("mj.top_p")),1),e("div",me,[e("div",ve,[d(s(f),{value:t.value.top_p,"onUpdate:value":o[6]||(o[6]=n=>t.value.top_p=n),step:.01,max:1},null,8,["value","step"])]),e("div",_e,a(t.value.top_p),1)])]),e("div",ye,a(l.$t("mj.top_pInfo")),1),e("section",fe,[e("div",null,a(l.$t("mj.presence_penalty")),1),e("div",xe,[e("div",he,[d(s(f),{value:t.value.presence_penalty,"onUpdate:value":o[7]||(o[7]=n=>t.value.presence_penalty=n),step:.01,max:1},null,8,["value","step"])]),e("div",be,a(t.value.presence_penalty),1)])]),e("div",$e,a(l.$t("mj.presence_penaltyInfo")),1),e("section",je,[e("div",null,a(l.$t("mj.frequency_penalty")),1),e("div",ge,[e("div",we,[d(s(f),{value:t.value.frequency_penalty,"onUpdate:value":o[8]||(o[8]=n=>t.value.frequency_penalty=n),step:.01,max:1},null,8,["value","step"])]),e("div",Se,a(t.value.frequency_penalty),1)])]),e("div",ke,a(l.$t("mj.frequency_penaltyInfo")),1),e("section",De,[e("div",null,a(l.$t("mj.tts_voice")),1),d(s(M),{value:t.value.tts_voice,"onUpdate:value":o[9]||(o[9]=n=>t.value.tts_voice=n),options:s(R),size:"small",class:"!w-[50%]"},null,8,["value","options"])])],64)):(b(),$("div",{key:1,class:"text-right cursor-pointer mb-4",onClick:o[10]||(o[10]=n=>E.value.openMore=!0)},[d(s(L),{type:"primary",round:"",size:"small",bordered:!1,class:"!cursor-pointer"},{default:p(()=>[c("More...")]),_:1})])),e("section",Ee,[d(s(j),{onClick:o[11]||(o[11]=n=>V())},{default:p(()=>[c(a(l.$t("mj.setBtBack")),1)]),_:1}),d(s(j),{type:"primary",onClick:o[12]||(o[12]=n=>K("no"))},{default:p(()=>[c(a(l.$t("common.save")),1)]),_:1})])],64))}}),Ue={id:"setserver"},Me={class:"flex justify-between items-baseline"},Oe={class:"pb-1"},Ce={class:"text-right"},Ne={class:"mb-4 flex justify-between items-center"},Ie={class:"text-[var(--n-tab-text-color-active)]"},Ae={class:"mb-4 flex justify-between items-center"},Pe=e("span",{class:"text-[var(--n-tab-text-color-active)]"},"OpenAI Api Key:",-1),Re={class:"text-right"},Be={class:"mb-4 flex justify-between items-center"},Te={class:"text-[var(--n-tab-text-color-active)]"},Ke={class:"mb-4 flex justify-between items-center"},Ve=e("span",{class:"text-[var(--n-tab-text-color-active)]"},"Midjourney Api Secret:",-1),Ye={class:"mb-4 flex justify-start items-center"},Je={class:"text-right"},Le={class:"mb-4 flex justify-between items-center"},qe={class:"text-[var(--n-tab-text-color-active)]"},ze={class:"mb-4 flex justify-between items-center"},Ge=e("span",{class:"text-[var(--n-tab-text-color-active)]"},"Suno Key:",-1),We={class:"text-right"},Fe={class:"mb-4 flex justify-between items-center"},Xe={class:"text-[var(--n-tab-text-color-active)]"},He={class:"text-right flex justify-end space-x-2"},tt=N({__name:"aiSetServer",emits:["close"],setup(P,{emit:g}){const D=I(),x=()=>{r.setMyData(r.myData),D.success(A("mjchat.success")),g("close")};return k(()=>r.myData.OPENAI_API_BASE_URL,i=>{r.myData.IS_SET_SYNC&&(r.myData.MJ_SERVER=i,r.myData.SUNO_SERVER=i)}),k(()=>r.myData.OPENAI_API_KEY,i=>{r.myData.IS_SET_SYNC&&(r.myData.MJ_API_SECRET=i,r.myData.SUNO_KEY=i)}),(i,t)=>(b(),$("div",Ue,[e("div",Me,[e("div",Oe,[d(s(C),{value:s(r).myData.IS_SET_SYNC,"onUpdate:value":t[0]||(t[0]=u=>s(r).myData.IS_SET_SYNC=u),size:"small"},{checked:p(()=>[c(a(i.$t("mjchat.setSync")),1)]),unchecked:p(()=>[c(a(i.$t("mjchat.setSync")),1)]),_:1},8,["value"])]),e("div",Ce,a(i.$t("mj.setOpen")),1)]),e("section",Ne,[d(s(m),{onBlur:s(h),placeholder:i.$t("mj.setOpenPlaceholder"),value:s(r).myData.OPENAI_API_BASE_URL,"onUpdate:value":t[1]||(t[1]=u=>s(r).myData.OPENAI_API_BASE_URL=u),clearable:""},{prefix:p(()=>[e("span",Ie,a(i.$t("mj.setOpenUrl"))+":",1)]),_:1},8,["onBlur","placeholder","value"])]),e("section",Ae,[d(s(m),{onBlur:s(h),type:"password",placeholder:i.$t("mj.setOpenKeyPlaceholder"),"show-password-on":"click",value:s(r).myData.OPENAI_API_KEY,"onUpdate:value":t[2]||(t[2]=u=>s(r).myData.OPENAI_API_KEY=u),clearable:""},{prefix:p(()=>[Pe]),_:1},8,["onBlur","placeholder","value"])]),e("div",Re,a(i.$t("mj.setMj")),1),e("section",Be,[d(s(m),{placeholder:i.$t("mj.setOpenPlaceholder"),value:s(r).myData.MJ_SERVER,"onUpdate:value":t[3]||(t[3]=u=>s(r).myData.MJ_SERVER=u),clearable:""},{prefix:p(()=>[e("span",Te,a(i.$t("mj.setMjUrl")),1)]),_:1},8,["placeholder","value"])]),e("section",Ke,[d(s(m),{type:"password",placeholder:i.$t("mj.setMjKeyPlaceholder"),"show-password-on":"click",value:s(r).myData.MJ_API_SECRET,"onUpdate:value":t[4]||(t[4]=u=>s(r).myData.MJ_API_SECRET=u),clearable:""},{prefix:p(()=>[Ve]),_:1},8,["placeholder","value"])]),e("section",Ye,[d(s(C),{value:s(r).myData.MJ_CDN_WSRV,"onUpdate:value":t[5]||(t[5]=u=>s(r).myData.MJ_CDN_WSRV=u)},{checked:p(()=>[c(a(i.$t("mj.wsrvClose")),1)]),unchecked:p(()=>[c(a(i.$t("mj.wsrvOpen")),1)]),_:1},8,["value"])]),e("div",Je,a(i.$t("suno.serverabout")),1),e("section",Le,[d(s(m),{onBlur:s(h),placeholder:i.$t("mj.setOpenPlaceholder"),value:s(r).myData.SUNO_SERVER,"onUpdate:value":t[6]||(t[6]=u=>s(r).myData.SUNO_SERVER=u),clearable:""},{prefix:p(()=>[e("span",qe,a(i.$t("suno.server"))+":",1)]),_:1},8,["onBlur","placeholder","value"])]),e("section",ze,[d(s(m),{onBlur:s(h),type:"password",placeholder:i.$t("suno.setOpenKeyPlaceholder"),"show-password-on":"click",value:s(r).myData.SUNO_KEY,"onUpdate:value":t[7]||(t[7]=u=>s(r).myData.SUNO_KEY=u),clearable:""},{prefix:p(()=>[Ge]),_:1},8,["onBlur","placeholder","value"])]),e("div",We,a(i.$t("mj.setUploader")),1),e("section",Fe,[d(s(m),{placeholder:i.$t("mj.setOpenPlaceholder"),value:s(r).myData.UPLOADER_URL,"onUpdate:value":t[8]||(t[8]=u=>s(r).myData.UPLOADER_URL=u),clearable:""},{prefix:p(()=>[e("span",Xe,a(i.$t("mj.setUploaderUrl")),1)]),_:1},8,["placeholder","value"])]),e("section",He,[d(s(j),{onClick:t[9]||(t[9]=u=>s(r).setInit())},{default:p(()=>[c(a(i.$t("mj.setBtBack")),1)]),_:1}),d(s(j),{type:"primary",onClick:x},{default:p(()=>[c(a(i.$t("mj.setBtSave")),1)]),_:1})])]))}});export{tt as _,et as a};
