import{d as O,as as E,P as H,u as W,a2 as K,l as $,r as w,o as g,c as j,a as t,a6 as s,b as n,R as e,N as A,ab as i,a5 as y,ac as _,a8 as q,ah as k,b9 as Q,X,aa as Y,ba as Z,a3 as M,b3 as F,$ as ee,bb as te,Q as L,a1 as N,bc as se,bd as ae,b5 as ne,b4 as R,O as oe,aO as ie,ad as le}from"./index-9dea4b07.js";import{a as re,_ as ce}from"./aiSetServer.vue_vue_type_script_setup_true_lang-5a2f2af3.js";import"./Switch-7f381e77.js";function ue(){const b=new Date,p=b.getDate(),m=b.getMonth()+1;return`${b.getFullYear()}-${m}-${p}`}const de={class:"p-4 space-y-5 min-h-[200px]"},pe={class:"space-y-6"},me={class:"flex items-center space-x-4"},ve={class:"flex-shrink-0 w-[100px]"},fe={class:"flex-1"},ge={class:"flex items-center space-x-4"},he={class:"flex-shrink-0 w-[100px]"},ye={class:"w-[200px]"},_e={class:"flex items-center space-x-4"},ke={class:"flex-shrink-0 w-[100px]"},be={class:"flex-1"},xe={class:"flex-shrink-0 w-[100px]"},$e={class:"flex flex-wrap items-center gap-4"},we={class:"flex items-center space-x-4"},Se={class:"flex-shrink-0 w-[100px]"},Ce={class:"flex flex-wrap items-center gap-4"},je={class:"flex items-center space-x-4"},Ie={class:"flex-shrink-0 w-[100px]"},Ne={class:"flex flex-wrap items-center gap-4"},Pe={class:"flex items-center space-x-4"},Ue={class:"flex-shrink-0 w-[100px]"},Ve=O({__name:"General",setup(b){const p=E(),m=H(),{isMobile:u}=W(),c=K(),x=$(()=>p.theme),h=$(()=>m.userInfo),d=w(h.value.avatar??""),v=w(h.value.name??""),a=w(h.value.description??""),f=$({get(){return p.language},set(o){p.setLanguage(o)}}),P=[{label:"Auto",key:"auto",icon:"ri:contrast-line"},{label:"Light",key:"light",icon:"ri:sun-foggy-line"},{label:"Dark",key:"dark",icon:"ri:moon-foggy-line"}],U=[{label:"简体中文",key:"zh-CN",value:"zh-CN"},{label:"繁體中文",key:"zh-TW",value:"zh-TW"},{label:"English",key:"en-US",value:"en-US"},{label:"한국어",key:"ko-KR",value:"ko-KR"},{label:"Русский язык",key:"ru-RU",value:"ru-RU"},{label:"Tiếng Việt",key:"vi-VN",value:"vi-VN"},{label:"Français",key:"fr-FR",value:"fr-FR"},{label:"Türkçe",key:"tr-TR",value:"tr-TR"}];function S(o){m.updateUserInfo(o),c.success(M("common.success"))}function V(){m.resetUserInfo(),c.success(M("common.success")),window.location.reload()}function T(){const o=ue(),l=localStorage.getItem("chatStorage")||"{}",r=JSON.stringify(JSON.parse(l),null,2),C=new Blob([r],{type:"application/json"}),z=URL.createObjectURL(C),I=document.createElement("a");I.href=z,I.download=`chat-store_${o}.json`,document.body.appendChild(I),I.click(),document.body.removeChild(I)}function D(o){const l=o.target;if(!l||!l.files)return;const r=l.files[0];if(!r)return;const C=new FileReader;C.onload=()=>{try{const z=JSON.parse(C.result);localStorage.setItem("chatStorage",JSON.stringify(z)),c.success(M("common.success")),location.reload()}catch{c.error(M("common.invalidFileFormat"))}},C.readAsText(r)}function G(){localStorage.removeItem("chatStorage"),location.reload()}function J(){const o=document.getElementById("fileInput2");o&&o.click()}return(o,l)=>(g(),j("div",de,[t("div",pe,[t("div",me,[t("span",ve,s(o.$t("setting.avatarLink")),1),t("div",fe,[n(e(A),{value:d.value,"onUpdate:value":l[0]||(l[0]=r=>d.value=r),placeholder:""},null,8,["value"])]),n(e(_),{size:"tiny",text:"",type:"primary",onClick:l[1]||(l[1]=r=>S({avatar:d.value}))},{default:i(()=>[y(s(o.$t("common.save")),1)]),_:1})]),t("div",ge,[t("span",he,s(o.$t("setting.name")),1),t("div",ye,[n(e(A),{value:v.value,"onUpdate:value":l[2]||(l[2]=r=>v.value=r),placeholder:""},null,8,["value"])]),n(e(_),{size:"tiny",text:"",type:"primary",onClick:l[3]||(l[3]=r=>S({name:v.value}))},{default:i(()=>[y(s(o.$t("common.save")),1)]),_:1})]),t("div",_e,[t("span",ke,s(o.$t("setting.description")),1),t("div",be,[n(e(A),{value:a.value,"onUpdate:value":l[4]||(l[4]=r=>a.value=r),placeholder:""},null,8,["value"])]),n(e(_),{size:"tiny",text:"",type:"primary",onClick:l[5]||(l[5]=r=>S({description:a.value}))},{default:i(()=>[y(s(o.$t("common.save")),1)]),_:1})]),t("div",{class:q(["flex items-center space-x-4",e(u)&&"items-start"])},[t("span",xe,s(o.$t("setting.chatHistory")),1),t("div",$e,[n(e(_),{size:"small",onClick:T},{icon:i(()=>[n(e(k),{icon:"ri:download-2-fill"})]),default:i(()=>[y(" "+s(o.$t("common.export")),1)]),_:1}),t("input",{id:"fileInput2",type:"file",style:{display:"none"},onChange:D},null,32),n(e(_),{size:"small",onClick:J},{icon:i(()=>[n(e(k),{icon:"ri:upload-2-fill"})]),default:i(()=>[y(" "+s(o.$t("common.import")),1)]),_:1}),n(e(Q),{placement:"bottom",onPositiveClick:G},{trigger:i(()=>[n(e(_),{size:"small"},{icon:i(()=>[n(e(k),{icon:"ri:close-circle-line"})]),default:i(()=>[y(" "+s(o.$t("common.clear")),1)]),_:1})]),default:i(()=>[y(" "+s(o.$t("chat.clearHistoryConfirm")),1)]),_:1})])],2),t("div",we,[t("span",Se,s(o.$t("setting.theme")),1),t("div",Ce,[(g(),j(X,null,Y(P,r=>n(e(_),{key:r.key,size:"small",type:r.key===e(x)?"primary":void 0,onClick:C=>e(p).setTheme(r.key)},{icon:i(()=>[n(e(k),{icon:r.icon},null,8,["icon"])]),_:2},1032,["type","onClick"])),64))])]),t("div",je,[t("span",Ie,s(o.$t("setting.language")),1),t("div",Ne,[n(e(Z),{style:{width:"140px"},value:e(f),options:U,onUpdateValue:l[6]||(l[6]=r=>e(p).setLanguage(r))},null,8,["value"])])]),t("div",Pe,[t("span",Ue,s(o.$t("setting.resetUserInfo")),1),n(e(_),{size:"small",onClick:V},{default:i(()=>[y(s(o.$t("common.reset")),1)]),_:1})])])]))}}),Te="chatgpt-web-midjourney-proxy",De="2.17.3",ze="ChatGPT Web Midjourney Proxy",Me="Dooy <ydlhero@gmail.com>",Re=["chatgpt-web","chatgpt","chatbot","Midjourney","Midjourney UI","Midjourney Proxy","gpts","gpts ui","vue"],Le={dev:"vite",build:"run-p build-only",buildold:"run-p type-check build-only",preview:"vite preview","build-only":"vite build","type-check":"vue-tsc --noEmit",lint:"eslint .","lint:fix":"eslint . --fix",bootstrap:"pnpm install && pnpm run common:prepare","common:cleanup":"rimraf node_modules && rimraf pnpm-lock.yaml","common:prepare":"husky install"},Ae={"@traptitech/markdown-it-katex":"^3.6.0","@vueuse/core":"^9.13.0","eventsource-parser":"^1.1.1","form-data":"^4.0.0","gpt-tokenizer":"^2.1.2","highlight.js":"^11.7.0",html2canvas:"^1.4.1","js-audio-recorder":"^1.0.7",katex:"^0.16.4",localforage:"^1.10.0","markdown-it":"^13.0.1","naive-ui":"^2.34.3",pinia:"^2.0.33",vue:"^3.2.47","vue-i18n":"^9.2.2","vue-router":"^4.1.6","vue-turnstile":"^1.0.8","vue-waterfall-plugin-next":"^2.3.1"},Oe={"@antfu/eslint-config":"^0.35.3","@commitlint/cli":"^17.4.4","@commitlint/config-conventional":"^17.4.4","@iconify/vue":"^4.1.0","@tauri-apps/cli":"^1.5.11","@types/crypto-js":"^4.1.1","@types/katex":"^0.16.0","@types/markdown-it":"^12.2.3","@types/markdown-it-link-attributes":"^3.0.1","@types/node":"^18.14.6","@vitejs/plugin-vue":"^4.0.0",autoprefixer:"^10.4.13",axios:"^1.3.4","crypto-js":"^4.1.1",eslint:"^8.35.0","http-proxy-middleware":"^2.0.6",husky:"^8.0.3",less:"^4.1.3","lint-staged":"^13.1.2","markdown-it-link-attributes":"^4.0.1","npm-run-all":"^4.1.5",postcss:"^8.4.21",rimraf:"^4.2.0",tailwindcss:"^3.3.6",typescript:"~4.9.5",vite:"^4.2.0","vite-plugin-pwa":"^0.14.4","vite-plugin-static-copy":"^0.17.0","vue-tsc":"^1.2.0"},B={name:Te,version:De,private:!1,description:ze,author:Me,keywords:Re,scripts:Le,dependencies:Ae,devDependencies:Oe,"lint-staged":{"*.{ts,tsx,vue}":["pnpm lint:fix"]}},Be={class:"p-4 space-y-4"},Fe={class:"text-xl font-bold"},Ge={key:0,class:"text-red-500",href:"https://github.com/Dooy/chatgpt-web-midjourney-proxy",target:"_blank"},Je={key:1,class:"text-gray-500",href:"https://github.com/Dooy/chatgpt-web-midjourney-proxy",target:"_blank"},Ee={class:"p-2 space-y-2 rounded-md bg-neutral-100 dark:bg-neutral-700"},He=["innerHTML"],We={key:0,class:"flex items-center justify-between"},Ke={key:1},qe=O({__name:"About",setup(b){const p=F(),m=w(!1),u=w(),c=w({lastVersion:""}),x=$(()=>!!p.isChatGPTAPI);async function h(){try{m.value=!0;const a=await ae();u.value={usage:a.usage?`${a.usage}`:"-",remaining:a.remaining?`${a.remaining}`:"-",hard_limit_usd:a.hard_limit_usd?`${a.hard_limit_usd}`:"-",apiModel:"ChatGPTAPI",reverseProxy:"-",timeoutMs:1e5,socksProxy:"-",httpsProxy:"-"}}finally{m.value=!1}}const d=()=>{const a=localStorage.getItem("lastVersion");if(!a)return"";const f=JSON.parse(a);return Date.now()-f.t>1e3*60*60?"":f.v};ee(()=>{h();let a=d();a?c.value.lastVersion=a:te().then(f=>{f[0]&&f[0].name&&(c.value.lastVersion=f[0].name,localStorage.setItem("lastVersion",JSON.stringify({v:f[0].name,t:Date.now()})))})});const v=$(()=>c.value.lastVersion&&c.value.lastVersion!=`v${B.version}`);return(a,f)=>(g(),L(e(se),{show:m.value},{default:i(()=>{var P,U,S,V,T,D;return[t("div",Be,[t("h2",Fe,[y(" Version - "+s(e(B).version)+" ",1),e(v)?(g(),j("a",Ge," ("+s(a.$t("mj.findVersion"))+" "+s(c.value.lastVersion)+")",1)):c.value.lastVersion?(g(),j("a",Je," ("+s(a.$t("mj.yesLastVersion"))+")",1)):N("",!0)]),t("div",Ee,[t("p",{innerHTML:a.$t("mj.infoStar")},null,8,He)]),t("p",null,s(a.$t("setting.api"))+"："+s(((P=u.value)==null?void 0:P.apiModel)??"-"),1),e(x)?(g(),j("p",We,[t("div",null,s(a.$t("setting.monthlyUsage"))+"："+s(((U=u.value)==null?void 0:U.usage)??"-"),1),t("div",null,s(a.$t("mj.totalUsage"))+"："+s((S=u.value)!=null&&S.hard_limit_usd?(+((V=u.value)==null?void 0:V.hard_limit_usd)).toFixed(2):"-"),1),t("div",null,s(a.$t("setting.balance"))+"："+s(((T=u.value)==null?void 0:T.remaining)??"-"),1)])):N("",!0),e(x)?N("",!0):(g(),j("p",Ke,s(a.$t("setting.reverseProxy"))+"："+s(((D=u.value)==null?void 0:D.reverseProxy)??"-"),1))])]}),_:1},8,["show"]))}}),Qe={class:"ml-2"},Xe={class:"min-h-[100px]"},Ye={class:"ml-2"},Ze={class:"min-h-[100px]"},et={class:"ml-2"},tt={class:"ml-2"},ot=O({__name:"index",props:{visible:{type:Boolean}},emits:["update:visible"],setup(b,{emit:p}){const m=b,u=F(),c=$(()=>!!u.isChatGPTAPI),x=w("General"),h=$({get(){return m.visible},set(d){p("update:visible",d)}});return(d,v)=>(g(),L(e(le),{show:e(h),"onUpdate:show":v[1]||(v[1]=a=>ie(h)?h.value=a:null),"auto-focus":!1,preset:"card",style:{width:"95%","max-width":"640px"}},{default:i(()=>[t("div",null,[n(e(ne),{value:x.value,"onUpdate:value":v[0]||(v[0]=a=>x.value=a),type:"line",animated:""},{default:i(()=>[n(e(R),{name:"General",tab:"General"},{tab:i(()=>[n(e(k),{class:"text-lg",icon:"ri:file-user-line"}),t("span",Qe,s(d.$t("setting.general")),1)]),default:i(()=>[t("div",Xe,[n(Ve)])]),_:1}),e(c)?(g(),L(e(R),{key:0,name:"Advanced",tab:"Advanced"},{tab:i(()=>[n(e(k),{class:"text-lg",icon:"ri:equalizer-line"}),t("span",Ye,s(d.$t("mjset.model")),1)]),default:i(()=>[t("div",Ze,[n(re)])]),_:1})):N("",!0),e(oe).myData.session.isHideServer?N("",!0):(g(),L(e(R),{key:1,name:"server",tab:"server"},{tab:i(()=>[n(e(k),{class:"text-lg",icon:"mingcute:server-line"}),t("span",et,s(d.$t("mjset.server")),1)]),default:i(()=>[n(ce)]),_:1})),n(e(R),{name:"Config",tab:"Config"},{tab:i(()=>[n(e(k),{class:"text-lg",icon:"ri:list-settings-line"}),t("span",tt,s(d.$t("mjset.about")),1)]),default:i(()=>[n(qe)]),_:1})]),_:1},8,["value"])])]),_:1},8,["show"]))}});export{ot as default};
